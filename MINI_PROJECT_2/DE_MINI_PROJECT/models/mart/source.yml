version: 2


models:
  - name: kpi1
    description: >
      This model calculates the number of new and churned customers for each payment date.
    columns:
      - name: payment_date
        description: >
          The date of the payment transaction.
      - name: new_customers
        description: >
          The count of distinct new customers who made their first purchase on the corresponding payment date.
      - name: churned_customers
        description: >
          The count of distinct churned customers who made their last purchase on the corresponding payment date.


models:
  - name: kpi2
    description: >
      This model identifies customers who purchased from multiple products (cross-sell customers)
      and tracks product churn by identifying the last purchase month for each product.
    columns:
      - name: CUSTOMER_ID
        description: >
          Unique identifier for the customer.
      - name: products_purchased
        description: >
          The number of distinct products purchased by the customer.
      - name: churned_products
        description: >
          The number of distinct products churned by the customer.
      - name: churned_product_id
        description: >
          The specific product ID that the customer churned.
      - name: last_purchase_month
        description: >
          The last month in which the customer made a purchase from the churned product.

          
models:
  - name: kpi3
    description: >
      This model calculates cross-sell opportunities and product churn for customers by analyzing their purchasing patterns.
    columns:
      - name: CUSTOMER_ID
        description: >
          Unique identifier for the customer.
      - name: CUSTOMER_NAME
        description: >
          Name of the customer.
      - name: PAYMENT_DATE
        description: >
          The date of the payment transaction.
      - name: NO_OF_PRODUCTS
        description: >
          The number of distinct products purchased by the customer in the current month.
      - name: TOTAL_REVENUE
        description: >
          The total revenue generated by the customer in the current month.
      - name: PREVIOUS_MONTH
        description: >
          The month prior to the current payment date.
      - name: PREVIOUS_MONTH_REVENUE
        description: >
          The total revenue generated by the customer in the previous month.
      - name: NO_OF_PRODUCTS_PAST_MONTH
        description: >
          The number of distinct products purchased by the customer in the previous month.
      - name: CROSS_SELL_IN_PRODUCTS
        description: >
          The number of additional products purchased by the customer compared to the previous month.
      - name: CROSS_SELL_IN_REVENUE
        description: >
          The additional revenue generated by the customer compared to the previous month.
      - name: PRODUCT_CHURN
        description: >
          The number of products churned by the customer.
      - name: CROSS_SELL_RANK
        description: >
          Rank of the customer based on cross-sell revenue in descending order.
      - name: PRODUCT_CHURN_RANK
        description: >
          Rank of the customer based on product churn in descending order.



models:
  - name: kpi4
    description: >
      This model calculates revenue loss for each product by comparing the current revenue with the previous revenue.
    columns:
      - name: PRODUCT_ID
        description: >
          Unique identifier for the product.
      - name: PAYMENT_DATE
        description: >
          The date of the payment transaction.
      - name: Previous_Revenue
        description: >
          The revenue generated by the product in the previous transaction.
      - name: Current_Revenue
        description: >
          The revenue generated by the product in the current transaction.
      - name: Revenue_Loss
        description: >
          The difference between the previous revenue and the current revenue for the product.

models:
  - name: kpi5
    description: >
      This model calculates the number of new customers acquired each fiscal year based on their first payment date.
    columns:
      - name: fiscal_year
        description: >
          The fiscal year in which the customer made their first payment.
      - name: new_customers_count
        description: >
          The count of distinct new customers who made their first payment in the corresponding fiscal year.

models:
  - name: kpi6
    description: >
      This model ranks products based on their total revenue and provides their rank and total revenue.
    columns:
      - name: PRODUCT_ID
        description: >
          Unique identifier for the product.
      - name: total_products_revenue
        description: >
          Total revenue generated by the product, aggregated from the transactions table.
      - name: revenue_rank
        description: >
          Rank of the product based on its total revenue, in descending order.


models:
  - name: kpi7
    description: >
      This model ranks customers based on their total revenue and provides their rank, total revenue, and name.
    columns:
      - name: CUSTOMER_ID
        description: >
          Unique identifier for the customer.
      - name: total_revenue
        description: >
          Total revenue generated by the customer, aggregated from the transactions table.
      - name: revenue_rank
        description: >
          Rank of the customer based on their total revenue, in descending order.
      - name: CUSTOMER_NAME
        description: >
          Name of the customer, retrieved from the customers table.